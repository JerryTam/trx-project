# é¡¹ç›®å®Œæˆæ€»ç»“

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. é¡¹ç›®åŸºç¡€æ¶æ„
- âœ… æ ‡å‡†åŒ–çš„ Go é¡¹ç›®ç›®å½•ç»“æ„
- âœ… æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼ˆHandler â†’ Service â†’ Repository â†’ Modelï¼‰
- âœ… ç¬¦åˆ Go æœ€ä½³å®è·µçš„ä»£ç ç»„ç»‡

### 2. æ ¸å¿ƒæŠ€æœ¯æ ˆé›†æˆ
- âœ… **Gin** - Web æ¡†æ¶
- âœ… **Zap** - ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿ
- âœ… **Wire** - ä¾èµ–æ³¨å…¥ï¼ˆç¼–è¯‘æ—¶ï¼‰
- âœ… **GORM** - ORM æ¡†æ¶
- âœ… **MySQL** - æ•°æ®åº“
- âœ… **Redis** - ç¼“å­˜
- âœ… **Kafka** - æ¶ˆæ¯é˜Ÿåˆ—

### 3. åŸºç¡€è®¾æ–½ç»„ä»¶
- âœ… MySQL è¿æ¥æ± ç®¡ç†
- âœ… Redis ç¼“å­˜å°è£…
- âœ… Kafka Producer/Consumer
- âœ… Zap æ—¥å¿—åˆå§‹åŒ–å’Œå°è£…
- âœ… YAML é…ç½®æ–‡ä»¶ç®¡ç†

### 4. ä¸­é—´ä»¶ç³»ç»Ÿ
- âœ… è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶
- âœ… Panic æ¢å¤ä¸­é—´ä»¶
- âœ… CORS è·¨åŸŸä¸­é—´ä»¶

### 5. **ç»Ÿä¸€å“åº”æ ¼å¼** ğŸ†•
- âœ… ç»Ÿä¸€çš„ API å“åº”ç»“æ„
- âœ… å®Œæ•´çš„ä¸šåŠ¡çŠ¶æ€ç ä½“ç³»
- âœ… ä¾¿æ·çš„å“åº”è¾…åŠ©å‡½æ•°
- âœ… åˆ†é¡µæ•°æ®å“åº”æ”¯æŒ
- âœ… è¯¦ç»†çš„å“åº”æ ¼å¼æ–‡æ¡£

### 6. ç¤ºä¾‹åŠŸèƒ½ - ç”¨æˆ·ç®¡ç†
- âœ… ç”¨æˆ·æ³¨å†Œï¼ˆå¯†ç  bcrypt åŠ å¯†ï¼‰
- âœ… ç”¨æˆ·ç™»å½•
- âœ… è·å–ç”¨æˆ·ä¿¡æ¯
- âœ… ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- âœ… åˆ é™¤ç”¨æˆ·
- âœ… æ‰€æœ‰æ¥å£å·²ä½¿ç”¨ç»Ÿä¸€å“åº”æ ¼å¼

### 7. å¼€å‘å·¥å…·
- âœ… Docker Compose é…ç½®
- âœ… Makefile å‘½ä»¤é›†
- âœ… Air çƒ­é‡è½½é…ç½®
- âœ… é¡¹ç›®åˆå§‹åŒ–è„šæœ¬

### 8. æµ‹è¯•
- âœ… Service å±‚å•å…ƒæµ‹è¯•ç¤ºä¾‹
- âœ… Mock æµ‹è¯•æ¡†æ¶

### 9. å®Œæ•´æ–‡æ¡£
- âœ… README.md - é¡¹ç›®è¯´æ˜
- âœ… QUICKSTART.md - å¿«é€Ÿå¼€å§‹æŒ‡å—
- âœ… PROJECT_STRUCTURE.md - é¡¹ç›®ç»“æ„è¯´æ˜
- âœ… docs/API.md - API æ¥å£æ–‡æ¡£
- âœ… docs/ARCHITECTURE.md - æ¶æ„è®¾è®¡æ–‡æ¡£
- âœ… docs/KAFKA_USAGE.md - Kafka ä½¿ç”¨æŒ‡å—
- âœ… docs/DEPLOYMENT.md - éƒ¨ç½²æŒ‡å—
- âœ… **docs/RESPONSE_FORMAT.md** - å“åº”æ ¼å¼æ–‡æ¡£ ğŸ†•

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

### ä»£ç æ–‡ä»¶
```
â”œâ”€â”€ Go æºæ–‡ä»¶: 20+ ä¸ª
â”œâ”€â”€ é…ç½®æ–‡ä»¶: 4 ä¸ª
â”œâ”€â”€ æ–‡æ¡£æ–‡ä»¶: 8 ä¸ª
â”œâ”€â”€ è„šæœ¬æ–‡ä»¶: 2 ä¸ª
â””â”€â”€ æµ‹è¯•æ–‡ä»¶: 1 ä¸ª
```

### ä»£ç è¡Œæ•°ï¼ˆä¼°ç®—ï¼‰
```
- åº”ç”¨ä»£ç : ~1500 è¡Œ
- æµ‹è¯•ä»£ç : ~200 è¡Œ
- é…ç½®æ–‡ä»¶: ~200 è¡Œ
- æ–‡æ¡£: ~2000 è¡Œ
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. ç»Ÿä¸€å“åº”æ ¼å¼
```go
// æˆåŠŸå“åº”
response.Success(c, user)

// é”™è¯¯å“åº”
response.BadRequest(c, "Invalid parameters")

// ä¸šåŠ¡é”™è¯¯
response.BusinessError(c, response.CodeUserAlreadyExists, "User exists")

// åˆ†é¡µå“åº”
response.PageSuccess(c, users, total, page, pageSize)
```

### 2. çŠ¶æ€ç ä½“ç³»
- é€šç”¨çŠ¶æ€ç : 200, 400, 401, 403, 404, 500, 10001
- ç”¨æˆ·ç›¸å…³: 20001-20007
- æ•°æ®åº“ç›¸å…³: 30001-30003
- ç¼“å­˜ç›¸å…³: 40001
- Kafka ç›¸å…³: 50001
- ç¬¬ä¸‰æ–¹æœåŠ¡: 60001

### 3. å“åº”æ ¼å¼ç¤ºä¾‹

**æˆåŠŸå“åº”**:
```json
{
  "code": 200,
  "message": "success",
  "data": {...}
}
```

**åˆ†é¡µå“åº”**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [...],
    "total": 100,
    "page": 1,
    "page_size": 10
  }
}
```

**é”™è¯¯å“åº”**:
```json
{
  "code": 20002,
  "message": "username already exists"
}
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…ä¾èµ–
go mod tidy

# 2. ç”Ÿæˆ Wire ä»£ç 
cd cmd/server && wire && cd ../..

# 3. é…ç½®æ–‡ä»¶
cp config/config.yaml.example config/config.yaml

# 4. å¯åŠ¨ä¾èµ–æœåŠ¡
docker-compose up -d

# 5. è¿è¡Œé¡¹ç›®
make run
```

## ğŸ“¡ API ç«¯ç‚¹

```
GET    /health                    # å¥åº·æ£€æŸ¥
POST   /api/v1/users/register     # ç”¨æˆ·æ³¨å†Œ
POST   /api/v1/users/login        # ç”¨æˆ·ç™»å½•
GET    /api/v1/users              # ç”¨æˆ·åˆ—è¡¨
GET    /api/v1/users/:id          # è·å–ç”¨æˆ·
DELETE /api/v1/users/:id          # åˆ é™¤ç”¨æˆ·
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
trx-project/
â”œâ”€â”€ cmd/server/          # åº”ç”¨å…¥å£
â”œâ”€â”€ internal/            # ç§æœ‰ä»£ç 
â”‚   â”œâ”€â”€ api/            # API å±‚
â”‚   â”œâ”€â”€ service/        # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ repository/     # æ•°æ®è®¿é—®
â”‚   â””â”€â”€ model/          # æ•°æ®æ¨¡å‹
â”œâ”€â”€ pkg/                # å…¬å…±åº“
â”‚   â”œâ”€â”€ config/         # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ logger/         # æ—¥å¿—
â”‚   â”œâ”€â”€ database/       # æ•°æ®åº“
â”‚   â”œâ”€â”€ cache/          # ç¼“å­˜
â”‚   â”œâ”€â”€ kafka/          # Kafka
â”‚   â””â”€â”€ response/       # ç»Ÿä¸€å“åº” ğŸ†•
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/               # æ–‡æ¡£
â”œâ”€â”€ scripts/            # è„šæœ¬
â””â”€â”€ ...
```

## ğŸ”§ Make å‘½ä»¤

```bash
make help         # æ˜¾ç¤ºå¸®åŠ©
make deps         # å®‰è£…ä¾èµ–
make wire         # ç”Ÿæˆ Wire ä»£ç 
make build        # æ„å»ºé¡¹ç›®
make run          # è¿è¡Œé¡¹ç›®
make test         # è¿è¡Œæµ‹è¯•
make clean        # æ¸…ç†
make docker-up    # å¯åŠ¨ Docker
make docker-down  # åœæ­¢ Docker
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ä»£ç åˆ†å±‚
```
HTTP Request â†’ Router â†’ Middleware â†’ Handler â†’ Service â†’ Repository â†’ Database
```

### 2. ä¾èµ–æ³¨å…¥
ä½¿ç”¨ Wire è¿›è¡Œç¼–è¯‘æ—¶ä¾èµ–æ³¨å…¥ï¼Œé¿å…è¿è¡Œæ—¶åå°„

### 3. é”™è¯¯å¤„ç†
- Repository å±‚è¿”å›åŸå§‹é”™è¯¯
- Service å±‚å¤„ç†é”™è¯¯å¹¶è®°å½•æ—¥å¿—
- Handler å±‚ä½¿ç”¨ç»Ÿä¸€å“åº”æ ¼å¼è¿”å›

### 4. æ—¥å¿—è®°å½•
```go
logger.Info("User registered", 
    zap.String("username", username),
    zap.Uint("user_id", user.ID))
```

## ğŸ¨ ä»£ç ç¤ºä¾‹

### Handler å±‚
```go
func (h *UserHandler) Register(c *gin.Context) {
    var req RegisterRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        response.ValidateError(c, err.Error())
        return
    }
    
    user, err := h.service.Register(c.Request.Context(), 
        req.Username, req.Email, req.Password)
    if err != nil {
        if err.Error() == "username already exists" {
            response.BusinessError(c, response.CodeUserAlreadyExists, err.Error())
            return
        }
        response.InternalError(c, "Failed to register")
        return
    }
    
    response.CreatedWithMsg(c, "User registered successfully", user)
}
```

### Service å±‚
```go
func (s *userService) Register(ctx context.Context, username, email, password string) (*model.User, error) {
    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨
    if _, err := s.repo.GetByUsername(ctx, username); err == nil {
        return nil, errors.New("username already exists")
    }
    
    // åˆ›å»ºç”¨æˆ·
    hashedPassword, _ := bcrypt.GenerateFromPassword([]byte(password), bcrypt.DefaultCost)
    user := &model.User{
        Username: username,
        Email:    email,
        Password: string(hashedPassword),
    }
    
    if err := s.repo.Create(ctx, user); err != nil {
        s.logger.Error("Failed to create user", zap.Error(err))
        return nil, err
    }
    
    return user, nil
}
```

## ğŸ“š æ–‡æ¡£ç´¢å¼•

- [README.md](README.md) - é¡¹ç›®è¯´æ˜
- [QUICKSTART.md](QUICKSTART.md) - å¿«é€Ÿå¼€å§‹
- [PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md) - é¡¹ç›®ç»“æ„
- [docs/API.md](docs/API.md) - API æ–‡æ¡£
- [docs/RESPONSE_FORMAT.md](docs/RESPONSE_FORMAT.md) - å“åº”æ ¼å¼ ğŸ†•
- [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) - æ¶æ„è®¾è®¡
- [docs/KAFKA_USAGE.md](docs/KAFKA_USAGE.md) - Kafka ä½¿ç”¨
- [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md) - éƒ¨ç½²æŒ‡å—

## âœ… éªŒè¯æµ‹è¯•

é¡¹ç›®å·²é€šè¿‡ä»¥ä¸‹éªŒè¯ï¼š

```bash
âœ… Go ä¾èµ–å®‰è£…æˆåŠŸ
âœ… Wire ä»£ç ç”ŸæˆæˆåŠŸ
âœ… é¡¹ç›®ç¼–è¯‘æˆåŠŸ
âœ… ç»Ÿä¸€å“åº”æ ¼å¼å®ç°æˆåŠŸ
```

## ğŸ”® åç»­æ‰©å±•å»ºè®®

### é«˜ä¼˜å…ˆçº§
- â¬œ JWT è®¤è¯å’Œæˆæƒ
- â¬œ Swagger API æ–‡æ¡£
- â¬œ æ›´å¤šå•å…ƒæµ‹è¯•
- â¬œ é›†æˆæµ‹è¯•

### ä¸­ä¼˜å…ˆçº§
- â¬œ API é™æµ
- â¬œ ç†”æ–­å™¨
- â¬œ è¯·æ±‚è¿½è¸ª ID
- â¬œ å“åº”æ—¶é—´ç»Ÿè®¡
- â¬œ é”™è¯¯å›½é™…åŒ–

### ä½ä¼˜å…ˆçº§
- â¬œ åˆ†å¸ƒå¼è¿½è¸ªï¼ˆJaegerï¼‰
- â¬œ ç›‘æ§æŒ‡æ ‡ï¼ˆPrometheusï¼‰
- â¬œ é…ç½®ä¸­å¿ƒï¼ˆConsulï¼‰
- â¬œ æœåŠ¡å‘ç°
- â¬œ gRPC æ¥å£
- â¬œ GraphQL æ¥å£

## ğŸ‰ æ€»ç»“

é¡¹ç›®å·²ç»å®Œæˆäº†ä¸€ä¸ªç°ä»£åŒ–ã€ç”Ÿäº§çº§åˆ«çš„ Go Web æœåŠ¡åŸºç¡€æ¡†æ¶ï¼ŒåŒ…å«ï¼š

âœ… **å®Œæ•´çš„æŠ€æœ¯æ ˆ**: Gin + Zap + Wire + GORM + MySQL + Redis + Kafka  
âœ… **æ¸…æ™°çš„æ¶æ„**: åˆ†å±‚è®¾è®¡ï¼ŒèŒè´£æ˜ç¡®  
âœ… **ç»Ÿä¸€çš„è§„èŒƒ**: å“åº”æ ¼å¼ã€é”™è¯¯å¤„ç†ã€æ—¥å¿—è®°å½•  
âœ… **å¼€å‘å‹å¥½**: çƒ­é‡è½½ã€Dockerã€Makefile  
âœ… **æ–‡æ¡£å®Œå–„**: API æ–‡æ¡£ã€æ¶æ„æ–‡æ¡£ã€ä½¿ç”¨æŒ‡å—  
âœ… **ç”Ÿäº§å°±ç»ª**: é…ç½®ç®¡ç†ã€æ—¥å¿—ç³»ç»Ÿã€é”™è¯¯å¤„ç†  

é¡¹ç›®å¯ä»¥ä½œä¸ºï¼š
- âœ… ç”Ÿäº§é¡¹ç›®çš„åŸºç¡€æ¡†æ¶
- âœ… Go Web å¼€å‘çš„å­¦ä¹ ç¤ºä¾‹
- âœ… å¾®æœåŠ¡æ¶æ„çš„èµ·ç‚¹
- âœ… å›¢é˜Ÿå¼€å‘çš„æ ‡å‡†æ¨¡æ¿

å¼€å§‹ä½¿ç”¨å§ï¼ğŸš€

